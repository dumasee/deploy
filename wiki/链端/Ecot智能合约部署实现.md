一、合约相关的操作： <br>
  1、编译：<br>
 https://github.com/ethereum/solidity/releases 下载0.4.26版本的solc,编译
  solc  -o . - -bin - -abi - -hashes EV.sol
  编译完成后会生成.bin和 abi文件。<br>
  2、部署：<br>
   以地址TJrCGE3Yb6tzXzE8nNg35Hnb8Cqy8Ap58i作为发送方为例：
   ```
   ./cot-cli.sh createcontract 60806040526040805190810160405280600d81526020017f46696e616e63652056616c7565000000000000000000000000000000000000008152506000908051906020019061004f929190610130565b506040805190810160405280600281526020017f46560000000000000000000000000000000000000000000000000000000000008152506001908051906020019061009b929190610130565b506008600260006101000a81548160ff021916908360ff160217905550600260009054906101000a900460ff1660ff16600a0a6402540be400026003553480156100e457600080fd5b50600354600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506101d5565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061017157805160ff191683800117855561019f565b8280016001018555821561019f579182015b8281111561019e578251825591602001919060010190610183565b5b5090506101ac91906101b0565b5090565b6101d291905b808211156101ce5760008160009055506001016101b6565b5090565b90565b610b52806101e46000396000f300608060405260043610610099576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde031461009e578063095ea7b31461012e57806318160ddd1461019357806323b872dd146101be578063313ce5671461024357806370a082311461027457806395d89b41146102cb578063a9059cbb1461035b578063dd62ed3e146103c0575b600080fd5b3480156100aa57600080fd5b506100b3610437565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100f35780820151818401526020810190506100d8565b50505050905090810190601f1680156101205780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561013a57600080fd5b50610179600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506104d9565b604051808215151515815260200191505060405180910390f35b34801561019f57600080fd5b506101a86105cb565b6040518082815260200191505060405180910390f35b3480156101ca57600080fd5b50610229600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506105d5565b604051808215151515815260200191505060405180910390f35b34801561024f57600080fd5b50610258610844565b604051808260ff1660ff16815260200191505060405180910390f35b34801561028057600080fd5b506102b5600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061085b565b6040518082815260200191505060405180910390f35b3480156102d757600080fd5b506102e06108a4565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610320578082015181840152602081019050610305565b50505050905090810190601f16801561034d5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561036757600080fd5b506103a6600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610946565b604051808215151515815260200191505060405180910390f35b3480156103cc57600080fd5b50610421600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610a9f565b6040518082815260200191505060405180910390f35b606060008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104cf5780601f106104a4576101008083540402835291602001916104cf565b820191906000526020600020905b8154815290600101906020018083116104b257829003601f168201915b5050505050905090565b600081600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b6000600354905090565b600081600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561062557600080fd5b81600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101515156106b057600080fd5b81600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190509392505050565b6000600260009054906101000a900460ff16905090565b6000600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b606060018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561093c5780601f106109115761010080835404028352916020019161093c565b820191906000526020600020905b81548152906001019060200180831161091f57829003601f168201915b5050505050905090565b600081600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561099657600080fd5b81600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a36001905092915050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050929150505600a165627a7a72305820d24956568013dc471ae0181b55a2bdb07aae6c18d0d427a7276bf988e5ff24cd0029 TJrCGE3Yb6tzXzE8nNg35Hnb8Cqy8Ap58i
{
  "txid": "c13cc9c96e1a2d68b24373ca76a0a2d4a3f6b7ba7ed2de7782e21d96c9e16522",
  "sender": "TJrCGE3Yb6tzXzE8nNg35Hnb8Cqy8Ap58i",
  "hash160": "61659a95d1dcd00ff6df9142c27f270658afc190",
  "address": "ef594fe4345a5e36ce179535f13aa57d1c0f1256"
}
```
然后使用`cot_cli.sh getaccountinfo ef594fe4345a5e36ce179535f13aa57d1c0f1256`查询合约地址有没有创建，如果提示找不到地址，则等待出块，创建后会返回合约地址信息。
查询合约币余额：
  查询余额不需要交易，所以使用callcontract调用就可以。
  ```
 ./cot-cli.sh callcontract ef594fe4345a5e36ce179535f13aa57d1c0f1256 70a082310000000000000000000000003b0cf821ef18a02047e397ecb978bc077be9d8dd
  ```
 其中参数70a08231是查询余额函数的hash,可以在abi文件中查到,跟在后面的32字节是需要查询的地址，16进制表示，前面用0补齐32位。
 地址的16进制表示可以用gethexaddress RPC函数查询。
 结果可以在返回值的output里显示，也是32字节补齐的16进制码。
合约币转账操作：
```
./cot-cli.sh sendtocontract ef594fe4345a5e36ce179535f13aa57d1c0f1256 a9059cbb000000000000000000000000134d5857fedfe91bec19056ace336363c580c98d0000000000000000000000000000000000000000000000000000000000010000 TJrCGE3Yb6tzXzE8nNg35Hnb8Cqy8Ap58i
```

转账命令字节码的第一个参数是转账目的地址，第二个参数是转账金额，均为32字节对齐。转账命令执行完后会立即返回交易id，但没有返回交易执行结果。需要实时查询地址余额查询交易有没有执行成功。

二、合约执行逻辑  <br>
  1、TscTxConverter::extractionTscTransactions 里将生成的cot交易转换成eth形式的交易。  <br>
  2、在TSCstate里生成合约执行器Executive,在执行器里做合约执行。  <br>
  3、在Executive里调用虚拟机VM,在VM里执行指令码。 <br>
