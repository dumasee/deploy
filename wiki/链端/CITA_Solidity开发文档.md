# 生成账户

使用 [cita-cli]生成一个账户：

```
$ cita-cli key create
```

输出：

```
{
  "address": "0x37d1c7449bfe76fe9c445e626da06265e9377601",
  "private": "0x3ef2627393529fed043c7dbfd9358a4ae47a88a59949b07e7631722fd6959002",
  "public": "0x9dc6fc7856f5271e6e8c45e5c5fe22d2ff699ac3b24497599be77803d3c25fb4e2fe7da616c65a291910c947c89923009f354634421bddd0a25cd0a509bcf6a9"
}
```

也可使用其他方式生成。

注意：私钥与链一致，默认是 secp256k1

 合约

由用户进行操作创建合约：

```
$ cita-cli rpc sendRawTransaction
    - - code 0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506124f0806100606000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c80635b6a3d701161005b5780635b6a3d7014610675578063ccce4482146106bf578063db2521e814610805578063e9095e1a14610a2b57610088565b8063274f97c61461008d57806328620a3a146101805780632b1af7161461027357806349c3a4de146103db575b600080fd5b610166600480360360408110156100a357600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001906401000000008111156100e057600080fd5b8201836020820111156100f257600080fd5b8035906020019184600183028401116401000000008311171561011457600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610bdc565b604051808215151515815260200191505060405180910390f35b6102596004803603604081101561019657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001906401000000008111156101d357600080fd5b8201836020820111156101e557600080fd5b8035906020019184600183028401116401000000008311171561020757600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610e03565b604051808215151515815260200191505060405180910390f35b6103d96004803603608081101561028957600080fd5b81019080803590602001906401000000008111156102a657600080fd5b8201836020820111156102b857600080fd5b803590602001918460018302840111640100000000831117156102da57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290803590602001909291908035906020019064010000000081111561034757600080fd5b82018360208201111561035957600080fd5b8035906020019184600183028401116401000000008311171561037b57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929080351515906020019092919050505061102a565b005b610673600480360360c08110156103f157600080fd5b810190808035906020019064010000000081111561040e57600080fd5b82018360208201111561042057600080fd5b8035906020019184600183028401116401000000008311171561044257600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290803590602001906401000000008111156104a557600080fd5b8201836020820111156104b757600080fd5b803590602001918460018302840111640100000000831117156104d957600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190929190803563ffffffff1690602001909291908035906020019064010000000081111561055657600080fd5b82018360208201111561056857600080fd5b8035906020019184600183028401116401000000008311171561058a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290803590602001906401000000008111156105ed57600080fd5b8201836020820111156105ff57600080fd5b8035906020019184600183028401116401000000008311171561062157600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929050505061138f565b005b61067d6118f6565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610778600480360360208110156106d557600080fd5b81019080803590602001906401000000008111156106f257600080fd5b82018360208201111561070457600080fd5b8035906020019184600183028401116401000000008311171561072657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929050505061191c565b604051808415151515815260200180602001838152602001828103825284818151815260200191508051906020019080838360005b838110156107c85780820151818401526020810190506107ad565b50505050905090810190601f1680156107f55780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b6108be6004803603602081101561081b57600080fd5b810190808035906020019064010000000081111561083857600080fd5b82018360208201111561084a57600080fd5b8035906020019184600183028401116401000000008311171561086c57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611b21565b60405180806020018663ffffffff1663ffffffff1681526020018060200180602001858152602001848103845289818151815260200191508051906020019080838360005b8381101561091e578082015181840152602081019050610903565b50505050905090810190601f16801561094b5780820380516001836020036101000a031916815260200191505b50848103835287818151815260200191508051906020019080838360005b83811015610984578082015181840152602081019050610969565b50505050905090810190601f1680156109b15780820380516001836020036101000a031916815260200191505b50848103825286818151815260200191508051906020019080838360005b838110156109ea5780820151818401526020810190506109cf565b50505050905090810190601f168015610a175780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b610aee60048036036040811015610a4157600080fd5b8101908080359060200190640100000000811115610a5e57600080fd5b820183602082011115610a7057600080fd5b80359060200191846001830284011164010000000083111715610a9257600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190929190505050611f81565b604051808481526020018060200180602001838103835285818151815260200191508051906020019080838360005b83811015610b38578082015181840152602081019050610b1d565b50505050905090810190601f168015610b655780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b83811015610b9e578082015181840152602081019050610b83565b50505050905090810190601f168015610bcb5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610ca0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f73656e646572206e6f742061757468657265640000000000000000000000000081525060200191505060405180910390fd5b60006001905060008090505b600280549050811015610d365760028181548110610cc657fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161415610d2957600091505b8080600101915050610cac565b508015610df85760028490806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505082600660008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209080519060200190610df692919061238f565b505b600191505092915050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610ec7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f73656e646572206e6f742061757468657265640000000000000000000000000081525060200191505060405180910390fd5b60006001905060008090505b600380549050811015610f5d5760038181548110610eed57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161415610f5057600091505b8080600101915050610ed3565b50801561101f5760038490806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505082600760008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020908051906020019061101d92919061238f565b505b600191505092915050565b61103261224f565b1561138857600015156005856040518082805190602001908083835b60208310611071578051825260208201915060208101905060208303925061104e565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060070160019054906101000a900460ff16151514156110c257611389565b6005846040518082805190602001908083835b602083106110f857805182526020820191506020810190506020830392506110d5565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206004018390806001815401808255809150509060018203906000526020600020016000909192909190915055506005846040518082805190602001908083835b6020831061118e578051825260208201915060208101905060208303925061116b565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206005018290806001815401808255809150509060018203906000526020600020016000909192909190915090805190602001906111ff92919061238f565b50506005846040518082805190602001908083835b602083106112375780518252602082019150602081019050602083039250611214565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600601600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090806001815401808255809150509060018203906000526020600020016000909192909190915090805460018160011615610100020316600290046112f292919061240f565b50506001151581151514156113875760016005856040518082805190602001908083835b602083106113395780518252602082019150602081019050602083039250611316565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060070160006101000a81548160ff0219169083151502179055505b5b5b50505050565b6113976122ef565b156118ed57600115156005876040518082805190602001908083835b602083106113d657805182526020820191506020810190506020830392506113b3565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060070160019054906101000a900460ff1615151415611427576118ee565b856005876040518082805190602001908083835b6020831061145e578051825260208201915060208101905060208303925061143b565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060000190805190602001906114a792919061238f565b50846005876040518082805190602001908083835b602083106114df57805182526020820191506020810190506020830392506114bc565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600201908051906020019061152892919061238f565b50826005876040518082805190602001908083835b60208310611560578051825260208201915060208101905060208303925061153d565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060030160006101000a81548163ffffffff021916908363ffffffff1602179055506005866040518082805190602001908083835b602083106115ea57805182526020820191506020810190506020830392506115c7565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206004018490806001815401808255809150509060018203906000526020600020016000909192909190915055506005866040518082805190602001908083835b60208310611680578051825260208201915060208101905060208303925061165d565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206005018290806001815401808255809150509060018203906000526020600020016000909192909190915090805190602001906116f192919061238f565b50506005866040518082805190602001908083835b602083106117295780518252602082019150602081019050602083039250611706565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600601600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090806001815401808255809150509060018203906000526020600020016000909192909190915090805460018160011615610100020316600290046117e492919061240f565b5050806005876040518082805190602001908083835b6020831061181d57805182526020820191506020810190506020830392506117fa565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600101908051906020019061186692919061238f565b5060016005876040518082805190602001908083835b6020831061189f578051825260208201915060208101905060208303925061187c565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060070160016101000a81548160ff0219169083151502179055505b5b505050505050565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000606060006005846040518082805190602001908083835b602083106119585780518252602082019150602081019050602083039250611935565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060070160009054906101000a900460ff166005856040518082805190602001908083835b602083106119d257805182526020820191506020810190506020830392506119af565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206001016005866040518082805190602001908083835b60208310611a3e5780518252602082019150602081019050602083039250611a1b565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060050180549050818054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611b0d5780601f10611ae257610100808354040283529160200191611b0d565b820191906000526020600020905b815481529060010190602001808311611af057829003601f168201915b505050505091509250925092509193909250565b6060600060608060006005866040518082805190602001908083835b60208310611b605780518252602082019150602081019050602083039250611b3d565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206002016005876040518082805190602001908083835b60208310611bcc5780518252602082019150602081019050602083039250611ba9565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060030160009054906101000a900463ffffffff166005886040518082805190602001908083835b60208310611c495780518252602082019150602081019050602083039250611c26565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600501600081548110611c8b57fe5b906000526020600020016005896040518082805190602001908083835b60208310611ccb5780518252602082019150602081019050602083039250611ca8565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600601600081548110611d0d57fe5b9060005260206000200160058a6040518082805190602001908083835b60208310611d4d5780518252602082019150602081019050602083039250611d2a565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600401600081548110611d8f57fe5b9060005260206000200154848054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611e2f5780601f10611e0457610100808354040283529160200191611e2f565b820191906000526020600020905b815481529060010190602001808311611e1257829003601f168201915b50505050509450828054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611ecb5780601f10611ea057610100808354040283529160200191611ecb565b820191906000526020600020905b815481529060010190602001808311611eae57829003601f168201915b50505050509250818054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611f675780601f10611f3c57610100808354040283529160200191611f67565b820191906000526020600020905b815481529060010190602001808311611f4a57829003601f168201915b505050505091509450945094509450945091939590929450565b60006060806005856040518082805190602001908083835b60208310611fbc5780518252602082019150602081019050602083039250611f99565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206004018481548110611ffd57fe5b90600052602060002001546005866040518082805190602001908083835b6020831061203e578051825260208201915060208101905060208303925061201b565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600501858154811061207f57fe5b906000526020600020016005876040518082805190602001908083835b602083106120bf578051825260208201915060208101905060208303925061209c565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600601868154811061210057fe5b90600052602060002001818054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561219f5780601f106121745761010080835404028352916020019161219f565b820191906000526020600020905b81548152906001019060200180831161218257829003601f168201915b50505050509150808054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561223b5780601f106122105761010080835404028352916020019161223b565b820191906000526020600020905b81548152906001019060200180831161221e57829003601f168201915b505050505090509250925092509250925092565b600080600090505b6003805490508110156122e6576003818154811061227157fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614156122d95760019150506122ec565b8080600101915050612257565b50600090505b90565b600080600090505b600280549050811015612386576002818154811061231157fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561237957600191505061238c565b80806001019150506122f7565b50600090505b90565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106123d057805160ff19168380011785556123fe565b828001600101855582156123fe579182015b828111156123fd5782518255916020019190600101906123e2565b5b50905061240b9190612496565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106124485780548555612485565b8280016001018555821561248557600052602060002091601f016020900482015b82811115612484578254825591600101919060010190612469565b5b5090506124929190612496565b5090565b6124b891905b808211156124b457600081600090555060010161249c565b5090565b9056fea265627a7a723158204ad3728d04433bff2bb484bda267bffdc5217cf6f9881989ecccefc0e002820164736f6c63430005100032 \
    - - private-key 0xbb08c5e094fc5259338984a49dc45d551388ff94c46e519d8d413d85d4e4fa7e \
    - - url http://127.0.0.1:1337
```

输出：

```
{
  "id": 3,
  "jsonrpc": "2.0",
  "result": {
    "hash": "0x8bca970a8836f291ca86d33beccb147c3d7b04b361589d41bd928db683d731aa",
    "status": "OK"
  }
}
```

获取 receipt 信息：

```
$ cita-cli rpc getTransactionReceipt \
    - - hash 0x8bca970a8836f291ca86d33beccb147c3d7b04b361589d41bd928db683d731aa \
    - - url http://127.0.0.1:4000
```

输出：

```
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "blockHash": "0x8cf225903eb7c49b0494f991941dcb4d401b2c51c321defa931914fb8f0aa87b",
    "blockNumber": "0xf2",
    "contractAddress": "0x5839153e0efe76efe0c974b728c4f49ca7ed75cc",
    "cumulativeQuotaUsed": "0xaef9",
    "errorMessage": null,
    "quotaUsed": "0xaef9",
    "logs": [
    ],
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "root": null,
    "transactionHash": "0x8bca970a8836f291ca86d33beccb147c3d7b04b361589d41bd928db683d731aa",
    "transactionIndex": "0x0"
  }
}
```

得到合约地址为 `0x5839153e0efe76efe0c974b728c4f49ca7ed75cc`

 调用

# 调用 上链 函数

调用测试合约 上链 方法，传入参数为 1 ：

```
$ cita-cli rpc sendRawTransaction \
    - - code 0x60fe47b10000000000000000000000000000000000000000000000000000000000000001 \
    - - private-key 0x3ef2627393529fed043c7dbfd9358a4ae47a88a59949b07e7631722fd6959002 \
    - - address 0x5839153e0efe76efe0c974b728c4f49ca7ed75cc \
    - - url http://127.0.0.1:4000
```

输出：

```
{
  "id": 3,
  "jsonrpc": "2.0",
  "result": {
    "hash": "0xa9179ed4226e16c332fc0b70a136f4b7dec59b8dd964c22381e24a35e22d0d2b",
    "status": "OK"
  }
}
```

查看 receipt 信息：

```
$ cita-cli rpc getTransactionReceipt \
    - - hash 0xa9179ed4226e16c332fc0b70a136f4b7dec59b8dd964c22381e24a35e22d0d2b \
    - - url http://127.0.0.1:4000
```

输出：

```
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "blockHash": "0x2984cd1ad2beaf267d3bff78e8dcb64bbf75bcc9721007d0f2a7c4a01ac68a1b",
    "blockNumber": "0x152e",
    "contractAddress": null,
    "cumulativeQuotaUsed": "0x4f51",
    "errorMessage": null,
    "quotaUsed": "0x4f51",
    "logs": [
    ],
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "root": null,
    "transactionHash": "0xa9179ed4226e16c332fc0b70a136f4b7dec59b8dd964c22381e24a35e22d0d2b",
    "transactionIndex": "0x0"
  }
}
```

从 `errorMessage` 中已经可以看出交易成功了。

# 调用 get 方法

查询结果看是否设置成功：

```
$ cita-cli rpc call \
    - - to 0x5839153e0efe76efe0c974b728c4f49ca7ed75cc \
    - - data 0x6d4ce63c \
    - - url http://127.0.0.1:4000
```

输出：

```
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": "0x0000000000000000000000000000000000000000000000000000000000000001"
}
```

可以看出结果已经是 1 了。